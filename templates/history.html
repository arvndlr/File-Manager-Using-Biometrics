<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>History</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='history.css') }}"
    />
  </head>
  <body>
    <div class="sidebar">
      <h2>Dashboard</h2>
      <a
        href="{{ url_for('home') }}"
        class="{% if active_page == 'home' %}active{% endif %}"
        >🏠 Home</a
      >
      <a
        href="{{ url_for('history') }}"
        class="{% if active_page == 'history' %}active{% endif %}"
        >📜 History</a
      >
      <a
        href="{{ url_for('users') }}"
        class="{% if active_page == 'users' %}active{% endif %}"
        >👥 User Management</a
      >
      <a
        href="{{ url_for('files') }}"
        class="{% if active_page == 'files' %}active{% endif %}"
        >📄 File Management</a
      >
      <a
        href="{{ url_for('logout') }}"
        class="{% if active_page == 'logout' %}active{% endif %}"
        >🚪 Logout</a
      >
    </div>

    <div class="main-content">
      <div class="top-bar">
        <h3>History</h3>
        <p>Welcome, {{ username }}!</p>
      </div>
      <div class="dashboard-section">
        <h2>📜 Transaction History</h2>
        <p>Here you can view all past transactions and records.</p>

        <!-- Transaction History Table -->
        <table>
          <thead>
            <tr>
              <th>Transaction ID</th>
              <th>File Name</th>
              <th>Borrower Name</th>
              <th>Borrow Date</th>
              <th>Return Date</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody>
            {% for transaction in history %}
            <tr>
              <td>{{ transaction[0] }}</td>
              <!-- Transaction ID -->
              <td>{{ transaction[1] }}</td>
              <!-- File Name -->
              <td>{{ transaction[2] }}</td>
              <!-- Borrower Name -->
              <td>{{ transaction[3] }}</td>
              <!-- Borrow Date -->
              <td>
                {{ transaction[4] if transaction[4] else 'Not Returned' }}
              </td>
              <!-- Return Date -->
              <td
                class="{{ 'returned' if transaction[5] == 'Returned' else 'borrowed' }}"
              >
                {{ transaction[5] }}
              </td>
              <!-- Status -->
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </body>
</html>
